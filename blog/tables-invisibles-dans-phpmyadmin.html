<!DOCTYPE html><html lang=fr><head><title>Tables invisibles dans PHPMyAdmin</title><meta content="default-src 'self' 'unsafe-inline'; font-src 'self' http://fonts.gstatic.com ; child-src 'none'; object-src 'self'" http-equiv=Content-Security-Policy /><meta content="width=device-width, initial-scale=1" name=viewport /><meta content="Bob Maerten" property="dc:creator"/><meta content="text/html" property="dc:format"/><meta content=fr-FR property="dc:language"/><meta content="Bob Maerten — Blog Perso" property="og:site_name"/><meta content=website property="og:type"/><meta content="https://bobmaerten.eu" property="og:url"/><meta content="Tables invisibles dans PHPMyAdmin" property="og:title"/><meta content="Humeurs, interrogations, pâtisseries, développement web, systèmes Linux et autres curiosités" property="og:description"/><meta content="https://bobmaerten.eu/img/avatar2014-89449806.jpg" property="og:image"/><meta content="50.348923;3.488592" name="geo.position"/><meta content="Valenciennes, Nord" name="geo.placename"/><meta content=FR-59 name="geo.region"/><meta content="@bobmaerten" name="twitter:site"/><meta content="Tables invisibles dans PHPMyAdmin" name="twitter:title"/><meta content="Humeurs, interrogations, pâtisseries, développement web, systèmes Linux et autres curiosités" name="twitter:description"/><meta content=summary_large_image name="twitter:card"/><meta content="https://bobmaerten.eu/img/sliders-7ff84f1b.jpg" name="twitter:image:src"/><meta content="@bobmaerten" name="twitter:creator"/><meta content="Tables invisibles dans PHPMyAdmin" itemprop=name /><meta content="Humeurs, interrogations, pâtisseries, développement web, systèmes Linux et autres curiosités" itemprop=description /><meta content="https://bobmaerten.eu/img/avatar2014-89449806.jpg" itemprop=image /><link href="https://plus.google.com/+BobMaerten" rel=publisher /><link href="/atom.xml" rel=alternate title="Bob Maerten — Blog Perso" type="application/rss+xml"/><meta content=yes name=mobile-web-app-capable /><meta content="Bob Maerten — Blog Perso" name=application-name /><link href="/chrome-touch-icon-192x192.png" rel=icon sizes=192x192 /><meta content=yes name=apple-mobile-web-app-capable /><meta content=black name=apple-mobile-web-app-status-bar-style /><meta content="Bob Maerten — Blog Perso" name=apple-mobile-web-app-title /><link href="/apple-touch-icon.png" rel=apple-touch-icon /><meta content="ms-touch-icon-144x144-precomposed.png" name=msapplication-TileImage /><meta content="#F5F5F5" name=msapplication-TileColor /><meta content="#F5F5F5" name=theme-color /><link href="/favicon-196x196.png" rel=icon sizes=196x196 type="image/png"/><link href="/favicon-160x160.png" rel=icon sizes=160x160 type="image/png"/><link href="/favicon-96x96.png" rel=icon sizes=96x96 type="image/png"/><link href="/favicon-32x32.png" rel=icon sizes=32x32 type="image/png"/><link href="/favicon-16x16.png" rel=icon sizes=16x16 type="image/png"/><link href="../css/main-8e11d2a2.css" rel=stylesheet /></head><body id=top><header id=header><a class="image avatar" href="/"><img srcset="../img/avatar2014_2x-09ee3761.jpg 2x" alt="Photo de Bob Maerten" src="../img/avatar2014-89449806.jpg"/></a><h1><strong>Bob Maerten</strong><br/> Humeurs, interrogations, pâtisseries, développement web, systèmes Linux et autres curiosités. </h1><ul class=nav><li><a href="../about.html">À propos</a></li><li><a href="./">Blog</a></li></ul></header><div id=main><section id=post><header class=major><h2 class=post-title>Tables invisibles dans PHPMyAdmin</h2></header><div class="image fit"><img srcset="../img/sliders_2x-22dd8464.jpg 2x" alt=sliders src="../img/sliders-7ff84f1b.jpg"/></div><p class=post-meta><span>15 Avr 2014</span><br/><span><a class="post-category post-category-sysadm" href="tags/sysadm.html">sysadm</a></span><span><a class="post-category post-category-dev" href="tags/dev.html">dev</a></span></p><div class=post-description><p><p>Hé, cela faisait un bail que je n&#39;avais pas posté quelque chose ici, alors pour y remédier, un petit retour sur un cas bizarre qui m&#39;est arrivé cet après-midi.</p> <p>Je souhaitais migrer une base mysql sur un nouveau serveur, donc exportée via un <code>mysqldump --opt</code> classique. Or, pour je ne sais quelle raison, les tables n&#39;apparaissaient pas dans l&#39;interface de PHPMyAdmin, alors que visible via la ligne de commande ou utilisable par l&#39;application associée.</p> <p>Après quelques recherches (merci <a href="http://stackoverflow.com/questions/5539589/imported-tables-are-not-showing-up-in-phpmyadmin/9905956#9905956">stackoverflow</a> !) il est apparu qu&#39;il s&#39;agissait d&#39;un problème de vues extraites dans le dump sql avec un <code>DEFINER</code> inexistant sur le nouveau serveur :</p> <pre class="highlight sql"><code><span class="cm">/*!50001 CREATE ALGORITHM=UNDEFINED */</span>
<span class="cm">/*!50013 DEFINER=`plop`@`old-db-server` SQL SECURITY DEFINER */</span>
<span class="cm">/*!50001 VIEW `stats ressources` AS select `logs`.`user_fullname` AS `user_fullname`,`logs`.`foreign_key` AS `foreign_key`,`logs`.`linked_element_name` AS `linked_element_name`,`logs`.`elapsed_time` AS `elapsed_time` from `logs` where (`logs`.`elapsed_time` &lt;&gt; 'NULL') */</span><span class="p">;</span>
<span class="cm">/*!50001 SET character_set_client      = @saved_cs_client */</span><span class="p">;</span>
<span class="cm">/*!50001 SET character_set_results     = @saved_cs_results */</span><span class="p">;</span>
</code></pre> <p>Dans cet example, l&#39;utilisateur <code>plop@old-db-server</code> n&#39;étant pas défini sur mon nouveau serveur, les tables était invisibles dans PHPMyAdmin, et plus grave encore faisait même planter la sauvegarde de notre agent MySQL de Time Navigator avec un message obscur du genre « Impossible de sauvegarder, présence d&#39;un objet flou. ». Voilà, débrouille-toi avec ça !</p> <p>Moralité, faites attention avec les vues et surtout comment et avec quel utilisateur vous les définissez. Mon conseil : <code>root@localhost</code> ;-)</p> </p></div></section><section id=comments><h2>Commentaires</h2><div aria-live=polite id=juvia_thread><noscript>Please enable JavaScript to view the comments powered by Juvia.</noscript></div></section></div><footer id=footer><ul class=icons><li><a class="icon fa-envelope-o" href="#email-protection-uryyb@oboznregra.rh"><span class=label>Email</span></a></li><li><a class="icon fa-rss" href="/atom.xml"><span class=label>RSS</span></a></li><li><a class="icon fa-twitter" href="https://twitter.com/bobmaerten"><span class=label>Twitter</span></a></li><li><a class="icon fa-github" href="https://github.com/bobmaerten"><span class=label>Github</span></a></li></ul><ul class=copyright><li>© Bob Maerten</li><li>Design&nbsp;: <a href="http://html5up.net">HTML5 UP</a></li><li>Photo&nbsp;: <a href="http://unsplash.com/juskteez/">Juskteez Vu</a></li></ul></footer><script src="../js/all-39da47a7.js"></script><script src="../js/juvia-10e4cb99.js"></script><script type="text/javascript">!function(){try{var a,b,c,d,g=document.getElementsByTagName("a");for(c=0;g.length-c;c++)try{b=g[c].getAttribute("href"),b&&b.indexOf("#email-protection-")>-1&&b.length>19&&(a="",d=19+b.indexOf("#email-protection-"),b.length>d&&(a=b.substr(18).replace(/[a-zA-Z]/g,function(a){return String.fromCharCode(("Z">=a?90:122)>=(a=a.charCodeAt(0)+13)?a:a-26)})),g[c].setAttribute("href","mailto:"+a))}catch(h){}}catch(h){}}();</script>
</body></html>